<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>闭包</title>
    <script>
        /*
        闭包
            访问到外部函数作用域变量的函数，例如下面的return
            可以用函数来隐藏不希望被外部访问的变量
            使用情况：隐藏一些不希望被人访问的内容

            构成：
                1.函数嵌套
                2.内部函数要引用外部函数的变量
                3.内部函数要作为外部函数的返回值（return）

            函数的作用域，在创建时就已经确定，跟调用的位置无关

            声明周期
                1.闭包函数在外部函数调用时产生，每次调用产生一个新的闭包
                2.内部函数丢失时销毁（内部函数被垃圾回收，闭包结束）

            闭包相较于类，浪费空间。类有原型链
                执行次数少时使用闭包，大量执行时使用类
        */

        function outer(){
            let num = 0;

            return () =>{
                num++;
                console.log(num);
            }
        }

        const newFn = outer();
        newFn();

        let  a = '全局变量';

        function fn(){
            console.log(a);
        }

        function fn1(){
            let a = "局部变量a";
            // console.log(a);
            fn();  // 函数的作用域，在创建时就已经确定，跟调用的位置无关
        }

        fn1();
    </script>
</head>
<body>
    
</body>
</html>